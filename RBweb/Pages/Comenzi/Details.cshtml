@page
@model RBweb.Pages.Comenzi.DetailsModel
@{
    ViewData["Title"] = "Detalii comandă";
    var total = Model.Comanda.Items.Sum(i => i.Pret * i.Cantitate);
}

<h1>Detalii comandă</h1>

<div class="mb-3">
    <div><b>Email:</b> @Model.Comanda.UserEmail</div>
    <div><b>Data:</b> @Model.Comanda.DataComanda.ToString("dd.MM.yyyy HH:mm")</div>
</div>

@if (!string.IsNullOrWhiteSpace(Model.Comanda.Mentiuni))
{
    <div class="alert alert-info">
        <b>Mențiuni:</b> @Model.Comanda.Mentiuni
    </div>
}

<table class="table">
    <thead>
        <tr>
            <th>Produs</th>
            <th>Preț</th>
            <th>Cantitate</th>
            <th>Subtotal</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.Comanda.Items)
        {
            var den = item.Meniu?.Denumire ?? ("Meniu #" + item.MeniuID);
            var subtotal = item.Pret * item.Cantitate;
            <tr>
                <td>@den</td>
                <td>@item.Pret.ToString("0.00") lei</td>
                <td>@item.Cantitate</td>
                <td>@subtotal.ToString("0.00") lei</td>
            </tr>
        }
    </tbody>
</table>

<div class="mt-3">
    <b>Total:</b> @total.ToString("0.00") lei
</div>

<a class="btn btn-secondary mt-3" asp-page="./Index">Înapoi</a>
